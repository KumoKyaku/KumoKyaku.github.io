---
title: MMD2FBX分析 #文章标题
date: 2016/02/04 23:46:55
updated: 2019/01/15 23:46:55
categories: "3D模型" #文章分类目录 可以省略
tags: #文章标签 可以省略
     - 3D模型
     - 美术
     - 资源
     - 建模
description: #你对本页的描述 可以省略
---


				 场景 mesh0	 		初音素材mesh0	初音素材mesh1		（不含有光源）				
原始大小（M）		8.43				0.8		
未处理			
FBX大小（M）		45.3				5.62	
顶点数（）			58441				11512      		5996
多边形（）			49432				16154      		7200
Batches（+2）		27					40							   （空场景含有2个dc）

用3dmax打开重新保存一次不做任何处理			
									  （合计）
3dmax顶点			56746				14009
3dmax面数			49432				23356
FBX大小（M）		14.8				1.55	
顶点数（）			58441				11512      		5996
多边形（）			49432				16154      		7200
Batches（+2）		27					40

结论：文件体积明显变小。原因可能是MMD4Mecanim生成的fbx含有多余信息。
FBX导出选项 几何体--保留边缘方向			对模型  无明显效果。



移除骨骼		

3dmax顶点			56746				14009
3dmax面数			49432				23356
FBX大小（M）		14.7				1.23	
顶点数（）			58441				11508      		6206
多边形（）			49432				16154      		7200
Batches（+2）		27					40

结论：骨骼对大小和性能影响不大，对于场景文件也可以保留骨骼。



重新分割UV
									  （合计）
3dmax顶点			56746				14009
3dmax面数			49432				23356
FBX大小（M）		14.8				1.41	
顶点数（）			58441				11512      		5996
多边形（）			49432				16154      		7200
Batches（+2）		27					41

结论：uv对模型大小和性能影响不大。
uv重叠会对烘焙贴图产生影响，对MMD模型UV重新分割是有必要的。
如果不使用AO贴图UV重分可以省略。
对于MMD shader有些无法在3Dmax里还原，因此没有办法重新制作贴图，所以无法重新分割UV。
（本人对于3dmax不是很了解，如果观点有误请指出）

**重要**********



建议的顶点数场景顶点应该控制在10k-20K，（视角内，移动端需要更低）
人物顶点控制在500-10K

真机测试：
红米note 模型 chan： 大小1.64m
顶点：9430 面数：13575  

场景中：模型1，平行光1 帧数 40-45
场景中：模型2，平行光1 帧数 23-25
场景中：模型3，平行光1 帧数 15-19

好消息是，动作和简单的物理使用不会掉帧。
视角内同时超过100K个顶点会直接卡死。（100K是个估算值值）
场景中的平行光会让顶点数增加5-10倍，原因不清楚（有了解的朋友希望告知）

结论，对于模型应该准备不同的Mesh，使用LOD group进行优化。
PC端并不需要。

MultiRes优化：（优化要在重新分割UV前进行）	
步骤：将模型按照正反面和主次程度分成若干部分。
使用MultiRes修改器进行优化
参数：网格内部顶点合并阈值0.1（自行调整）勾选材质边界线保留基础顶点多顶点法线角度75
点击生成，（机器差可能会出现未响应，耐心等待）
调节顶点百分比（35%一下开始出现接缝缺面，要自行把握）
点击生成完成优化。

逐一完成各个部分，重要部分轻度优化，内面和次要部分可以重点优化。


特别注意圆面，使用优化修改器优化，有的时候会把圆心顶点优化掉。
通常不要把圆面和关联部分分开，扇形面会被优化成三角面产生缝隙。

重新


									   （合计）
3dmax顶点			56746				14009
3dmax面数			49432				23356
FBX大小（M）		14.8				1.41	
顶点数（）			58441				11512      		5996
多边形（）			49432				16154      		7200
Batches（+2）		27					41
结论：uv对模型大小和性能影响不大。
uv重叠会对烘焙贴图产生影响，对MMD模型UV重新分割是有必要的。
如果不使用AO贴图UV重分可以省略。
对于MMD shader有些无法在3Dmax里还原，因此没有办法重新制作贴图，所以无法重新分割UV。
（本人对于3dmax不是很了解，如果观点有误请指出）