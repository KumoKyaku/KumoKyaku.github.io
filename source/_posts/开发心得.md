---
title: 开发心得 #文章标题
date: 2018/11/29 23:46:25
updated: 2019/1/6 23:46:25
categories: "游戏开发" #文章分类目录 可以省略
tags: #文章标签 可以省略
     - 游戏
     - 心得
description: #你对本页的描述 可以省略
---


# 开发心得

这里的每一点心得都是遇到的坑……

## 游戏设计
	别限制玩家要怎么玩

## 解决方案技术栈

	美术资源管理svn
	其他资源管理使用git
	文档使用  dokuwiki/ amwiki + git
	项目管理 （禅道/Redmine） + QQ邮箱 + webqq(调研中)
	服务器使用docker Kitematic
		mysql
		Jenkins
	使用.vsTemplate规范代码，创建VSIX

<!-- more -->

## 配置表

	ID、数字等不能有隐含信息，所有约束必须明文指出。
		错误示例：41，42，十位代表一个类别，个位代表子类别。

## MVC

	Q：游戏架构中MVC中M到底是什么？
	A：网络远端传来的数据；配置表；数据库。
		游戏设计中，数据来源总是从这三者之一出发，最终表现在屏幕上。
		Input操作应该转化为指令，然后进入游戏逻辑，构成网络指令和操作指令的统一。

## 代码细节 结构相关	

大约是编程心得和杂项

基本4层：  
- 4 软件层，程序入口。最开始向 2 注入IoC容器，或IoC配置。所有模块依赖的1中其他模块都需要延迟注入，避免循环引用问题。  
- 3 所有模块接口实现，通过依赖2实现延迟注入。  
- 2 Ioc容器接口，包含所有模块接口（如果使用反射可以省略4）  
- 1 最底层模块接口  
- 0 公共API接口，所有模块共用  
	
```
  4  	---------------`软件层 IoC容器实现层`
 /|\  
3 | 3 	---------------`模块实现层`（这里可以分为多个子层）
|\|/| 
| 2 |	---------------`IoC容器接口层`（这里可以分为多个子层）
|/|\|
1 | 1	---------------`模块接口层`
 \|/
  0 	---------------`通用接口层`
```

### 类设计

	如果一个类只为另一个类服务，那么他们应该写在一起，或者声明为内部类。
	如果只有一个Book类，那么BookManager类则没有必要，应该写成Book的静态函数。
	声明 和 new 对象之前想想它的生命周期。  

- 动态的还是静态的
- 是不是唯一的

### 不要用dynamic做形参类型
	
### 通讯协议类

#### 通讯类命名

	不建议在类名中加入前缀后缀，例如~reqest,~response，S2C~,C2S~,在实际使用中，
	类名会变得越来长，一个类也未必具有单一功能，S2C的类也可能S2S，失去前缀的意义反而带来歧义。

#### 应答类
	必须包含2个内容:
		谁做了什么，即请求上下文；
		导致了什么结果，连锁结果应该放在同一个包中，避免时序错误 类似Race Condition。
- 如果应答类只发给单一客户端，那么客户端可以对应请求上下文，但应该尽量避免这种情况。  
- 应答类中嵌套它对应的请求类是合理的。必须在 更小的包体 和 准确性 之间做出取舍。
- 如果特殊必要，不要使用增量的方式发送数据，每个消息包一定要独立完整。低频消息不在乎这点数据量。增量发送会导致接收端数据准确性问题。

### 代码规范

	方法宽度长度不应该大于一个屏幕
	
	///依据：大写开头是安全的，小写开头意味着你可能绕过某些Get/Set逻辑
	Pascal 类 结构 属性 方法 (static readonly) const event 
	camel  字段 参数 元组参数（本质为字段）

	缩进 4空格
	大括号换行
	= 后换行（代码过长时）
	=>后换行（代码过长时）

### ID
	ID 类唯一
	UID 进程内唯一
	GUID 全局唯一

# UI设计 （横屏）
- 画布大小 1280 * 720 （或者） 1334 * 750（iphone6尺寸）
- 切图大小尽量8的倍数，至少4的倍数。
- 对于移动端，一以红米Note4x 5.5英寸 1920*1080 像素为例：
  + 大Button，键盘按键的[3-4]/2，6-7个为宜。
  + 小Button，键盘按键的宽度,7-9为宜。
  + 可选物品选单 水平排列半屏 4 个为宜，垂直排列 2.5-3.5 。

真实项目中可以把UI设计稿截个全屏图放入手机中感受一下。